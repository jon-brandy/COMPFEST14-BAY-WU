# Hospital Donation

> Write-up author: jon-brandy (SOLVED)

## DESKRIPSI:
Please donate to help our hospital! Donate 10 - 50 (inclusive) transport ventilators to receive the rewards.

http://103.185.38.238:15193/
## LANGKAH-LANGKAH:
1. Membuka link website menggunakan sebuah intercepter bernama `burpsuite`.
2. Hal ini akan memudahkan kita untuk memanipulasi value dari JSON.
3. Nyalakan `intercept` pada burpsuite, lalu isi total donasi sebanyak minimal atau lebih dari donasi yang dibutuhkan (10 - 50).

![image](https://user-images.githubusercontent.com/70703371/184061708-b0d1e28e-5051-42d8-8bd8-3646b3506833.png)

4. Selanjutnya click button `Donate Now!`.
5. Setelah itu burpsuite akan menangkap request, plih `action` lalu pilih `send to repeater` agar memudahkan kita dalam memanipulasi JSON nantinya.

![image](https://user-images.githubusercontent.com/70703371/184061820-1d5011c6-6beb-41e5-8dc0-6bcb5773928f.png)

6. Pada tab `repeater`, click button `send`.

![image](https://user-images.githubusercontent.com/70703371/184061863-9a48d3f3-5d57-4dc1-a93e-707a4ac669ae.png)

7. Apabila kita membuka source-code website, lalu melihat pada bagian `script` tagnya.
8. Diketahui, terdapat sebuah **vuln** yakni `parseInt()` bug.

![image](https://user-images.githubusercontent.com/70703371/184062052-d3caba06-f173-4566-8a18-a45aaf713b11.png)

9. Untuk memanfaatkan kerentanan tersebut, kita dapat mengubah value dari `quantity` pada JSON dengan burpsuite.

![image](https://user-images.githubusercontent.com/70703371/184062431-5c632a5b-6438-42ab-8bdb-27dca195b3eb.png)

10. `12.1e222` -> nantinya jumlah yg akan ditangkap yaitu sebanyak 12.
11. Namun nampaknya cara tersebut belum berhasil.
12. Saya mencoba dengan mengubah `integer` tersebut menjadi sebuah `string`.

![image](https://user-images.githubusercontent.com/70703371/184062349-e85e6a90-abe4-451a-b85a-1b3dbb0170be.png)

13. Flag pun di dapat!

```
HTTP/1.1 200 OK
Server: nginx/1.23.1
Date: Thu, 11 Aug 2022 03:54:40 GMT
Content-Type: application/json; charset=utf-8
Content-Length: 215
Connection: close
X-Powered-By: Express
ETag: W/"d7-q3LwKfkC6cS87AoAhexM9eJgq9U"

{"status":"success","items":[{"name":"Transport Ventilator","quantity":"12.1e222"}],"totalPrice":"Rp3","message":"Thank you for your donation. Here is your reward: COMPFEST14{thank_you_4_helping_us_love_u_muaachh}"}
```

## FLAG

```
COMPFEST14{thank_you_4_helping_us_love_u_muaachh}
```

## LEARNING REFERENCES

```
https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt
```
